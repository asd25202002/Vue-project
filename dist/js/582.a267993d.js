(self["webpackChunkcat_house"]=self["webpackChunkcat_house"]||[]).push([[582],{7972:function(t,e,i){i(1703),i(6699),
/*!
  * Bootstrap modal.js v5.2.0 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
function(e,s){t.exports=s(i(1437),i(4130),i(7317),i(7547),i(1884),i(632),i(5160),i(9069))}(0,(function(t,e,i,s,a,l,o,n){"use strict";const d=t=>t&&"object"===typeof t&&"default"in t?t:{default:t},r=d(e),c=d(i),u=d(s),p=d(a),m=d(l),h=d(o),_="modal",g="bs.modal",b=`.${g}`,f=".data-api",v="Escape",P=`hide${b}`,k=`hidePrevented${b}`,w=`hidden${b}`,y=`show${b}`,x=`shown${b}`,U=`resize${b}`,M=`mousedown.dismiss${b}`,C=`keydown.dismiss${b}`,D=`click${b}${f}`,$="modal-open",L="fade",T="show",V="modal-static",E=".modal.show",I=".modal-dialog",A=".modal-body",W='[data-bs-toggle="modal"]',z={backdrop:!0,focus:!0,keyboard:!0},O={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class j extends p.default{constructor(t,e){super(t,e),this._dialog=c.default.findOne(I,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new u.default,this._addEventListeners()}static get Default(){return z}static get DefaultType(){return O}static get NAME(){return _}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||this._isTransitioning)return;const e=r.default.trigger(this._element,y,{relatedTarget:t});e.defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add($),this._adjustDialog(),this._backdrop.show((()=>this._showElement(t))))}hide(){if(!this._isShown||this._isTransitioning)return;const t=r.default.trigger(this._element,P);t.defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(T),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated()))}dispose(){for(const t of[window,this._dialog])r.default.off(t,b);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new m.default({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new h.default({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const i=c.default.findOne(A,this._dialog);i&&(i.scrollTop=0),t.reflow(this._element),this._element.classList.add(T);const s=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,r.default.trigger(this._element,x,{relatedTarget:e})};this._queueCallback(s,this._dialog,this._isAnimated())}_addEventListeners(){r.default.on(this._element,C,(t=>{if(t.key===v)return this._config.keyboard?(t.preventDefault(),void this.hide()):void this._triggerBackdropTransition()})),r.default.on(window,U,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),r.default.on(this._element,M,(t=>{t.target===t.currentTarget&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove($),this._resetAdjustments(),this._scrollBar.reset(),r.default.trigger(this._element,w)}))}_isAnimated(){return this._element.classList.contains(L)}_triggerBackdropTransition(){const t=r.default.trigger(this._element,k);if(t.defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;"hidden"===i||this._element.classList.contains(V)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(V),this._queueCallback((()=>{this._element.classList.remove(V),this._queueCallback((()=>{this._element.style.overflowY=i}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,i=this._scrollBar.getWidth(),s=i>0;if(s&&!e){const e=t.isRTL()?"paddingLeft":"paddingRight";this._element.style[e]=`${i}px`}if(!s&&e){const e=t.isRTL()?"paddingRight":"paddingLeft";this._element.style[e]=`${i}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each((function(){const i=j.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof i[t])throw new TypeError(`No method named "${t}"`);i[t](e)}}))}}return r.default.on(document,D,W,(function(e){const i=t.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),r.default.one(i,y,(e=>{e.defaultPrevented||r.default.one(i,w,(()=>{t.isVisible(this)&&this.focus()}))}));const s=c.default.findOne(E);s&&j.getInstance(s).hide();const a=j.getOrCreateInstance(i);a.toggle(this)})),n.enableDismissTrigger(j),t.defineJQueryPlugin(j),j}))},1339:function(t,e,i){"use strict";var s=i(7972),a=i.n(s);e["Z"]={methods:{showModal(){this.modal.show()},hideModal(){this.modal.hide()}},mounted(){this.modal=new(a())(this.$refs.modal)}}},4570:function(t,e,i){"use strict";i.d(e,{Z:function(){return x}});var s=i(3396),a=i(7139),l=i(9242);const o={class:"modal fade",id:"delModal",tabindex:"-1",ref:"modal"},n={class:"modal-dialog modal-xl modal-fullscreen-md-down"},d={class:"modal-content"},r={class:"modal-header bg-danger text-white"},c={class:"modal-title",id:"exampleModalLabel"},u=(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),p={class:"modal-body"},m=(0,s.Uk)(" 是否刪除 "),h={class:"text-danger"},_=(0,s._)("strong",null,"[刪除後將無法復原]",-1),g=(0,s.Uk)("。 "),b={class:"modal-footer"},f=(0,s._)("button",{type:"button",class:"btn btn-outline-muted","data-bs-dismiss":"modal"},"取消",-1);function v(t,e,i,v,P,k){return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",n,[(0,s._)("div",d,[(0,s._)("div",r,[(0,s._)("h5",c,"刪除 "+(0,a.zw)(i.item.title),1),u]),(0,s._)("div",p,[m,(0,s._)("strong",h,(0,a.zw)(i.item.title),1),_,g]),(0,s._)("div",b,[f,(0,s._)("button",{type:"button",class:"btn btn-danger",onClick:e[0]||(e[0]=(0,l.iM)((e=>t.$emit("del-item")),["prevent"]))},"確認刪除")])])])],512)}var P=i(1339),k={props:{item:{type:Object}},data(){return{modal:{}}},mixins:[P.Z]},w=i(89);const y=(0,w.Z)(k,[["render",v]]);var x=y},9948:function(t,e,i){"use strict";i.d(e,{Z:function(){return f}});var s=i(3396),a=i(7139),l=i(9242);const o={class:"row"},n={"aria-label":"分頁列"},d={class:"pagination justify-content-center"},r=(0,s._)("span",{"aria-hidden":"true"},"«",-1),c=[r],u=["onClick"],p=(0,s._)("span",{"aria-hidden":"true"},"»",-1),m=[p];function h(t,e,i,r,p,h){return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("nav",n,[(0,s._)("ul",d,[(0,s._)("li",{class:(0,a.C_)(["page-item",{disabled:!1===i.pages.has_pre}])},[(0,s._)("a",{class:"page-link link-dark",href:"#","aria-label":"上一頁",onClick:e[0]||(e[0]=(0,l.iM)((t=>h.updatePage(i.pages.current_page-1)),["prevent"]))},c)],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.pages.total_pages,(t=>((0,s.wg)(),(0,s.iD)("li",{class:(0,a.C_)(["page-item",{active:t===i.pages.current_page}]),key:t},[(0,s._)("a",{class:"page-link",href:"#",onClick:(0,l.iM)((e=>h.updatePage(t)),["prevent"])},(0,a.zw)(t),9,u)],2)))),128)),(0,s._)("li",{class:(0,a.C_)(["page-item",{disabled:!1===i.pages.has_next}])},[(0,s._)("a",{class:"page-link link-dark",href:"#","aria-label":"下一頁",onClick:e[1]||(e[1]=(0,l.iM)((t=>h.updatePage(i.pages.current_page+1)),["prevent"]))},m)],2)])])])}var _={props:["pages"],methods:{updatePage(t){this.$emit("emit-pages",t)}}},g=i(89);const b=(0,g.Z)(_,[["render",h]]);var f=b},6582:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return ce}});var s=i(3396),a=i(9242),l=i(7139);const o={class:"row g-3"},n={class:"col-lg-10 text-center"},d={class:"row"},r={class:"col-10"},c=(0,s._)("div",{class:"col-2 d-grid"},[(0,s._)("button",{type:"submit",class:"btn btn-outline-secondary"},[(0,s._)("i",{class:"bi bi-search"})])],-1),u={class:"col-lg-2 text-end"},p={class:"row my-4 table-responsive"},m={class:"table table-hover align-middle"},h=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{class:"text-center"},"分類"),(0,s._)("th",null,"產品名稱"),(0,s._)("th",{class:"text-right"},"原價"),(0,s._)("th",{class:"text-right"},"售價"),(0,s._)("th",{class:"text-center"},"狀態"),(0,s._)("th",{class:"text-center"},"編輯")])],-1),_={class:"text-center"},g={class:"text-right"},b={class:"text-right"},f={class:"text-center"},v={key:0,class:"text-success"},P={key:1,class:"text-muted"},k={class:"text-center"},w={class:"btn-group"},y=["onClick"],x=["onClick"];function U(t,e,i,U,M,C){const D=(0,s.up)("VLoading"),$=(0,s.up)("ProductModal"),L=(0,s.up)("DelModal"),T=(0,s.up)("Pagination");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(D,{active:M.isLoading},null,8,["active"]),(0,s._)("div",o,[(0,s._)("div",n,[(0,s._)("div",d,[(0,s._)("div",r,[(0,s.wy)((0,s._)("input",{type:"search",class:"form-control me-2",placeholder:"請輸入產品名稱","aria-label":"產品收尋輸入框","onUpdate:modelValue":e[0]||(e[0]=t=>M.search=t)},null,512),[[a.nr,M.search]])]),c])]),(0,s._)("div",u,[(0,s._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:e[1]||(e[1]=(0,a.iM)((t=>C.openProductsModal(!0)),["prevent"]))}," 新增產品 ")])]),(0,s._)("div",p,[(0,s._)("table",m,[h,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(C.filterProducts,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("td",_,(0,l.zw)(e.category),1),(0,s._)("td",null,(0,l.zw)(e.title),1),(0,s._)("td",g,(0,l.zw)(t.$filters.currency(e.origin_price)),1),(0,s._)("td",b,(0,l.zw)(t.$filters.currency(e.price)),1),(0,s._)("td",f,[e.is_enabled?((0,s.wg)(),(0,s.iD)("span",v,"啟用")):((0,s.wg)(),(0,s.iD)("span",P,"未啟用"))]),(0,s._)("td",k,[(0,s._)("div",w,[(0,s._)("button",{type:"button",class:"btn btn-outline-success",onClick:(0,a.iM)((t=>C.openProductsModal(!1,e)),["prevent"])},"編輯",8,y),(0,s._)("button",{type:"button",class:"btn btn-outline-danger",onClick:(0,a.iM)((t=>C.openDelProductsModal(e)),["prevent"])},"刪除",8,x)])])])))),128))])])]),(0,s.Wm)($,{ref:"productModal",product:M.tempProduct,onUpdateProduct:C.updateProduct},null,8,["product","onUpdateProduct"]),(0,s.Wm)(L,{ref:"delModal",item:M.tempProduct,onDelItem:C.delProduct},null,8,["item","onDelItem"]),(0,s.Wm)(T,{pages:M.pagination,onEmitPages:C.getProducts},null,8,["pages","onEmitPages"])],64)}const M={class:"modal fade",id:"productModal",tabindex:"-1","data-bs-backdrop":"static",ref:"modal"},C={class:"modal-dialog modal-xl modal-fullscreen-md-down"},D={class:"modal-content"},$=(0,s._)("div",{class:"modal-header bg-dark text-white"},[(0,s._)("h5",{class:"modal-title",id:"productModalLabel"},"新增產品"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),L={class:"modal-body"},T={class:"container-fluid"},V={class:"col-4"},E={class:"row"},I={class:"col mb-3"},A=(0,s._)("label",{for:"inputImageUrl",class:"form-label"},"產品封面圖片網址",-1),W=(0,s._)("div",{class:"valid-feedback text-end"},[(0,s._)("i",{class:"bi bi-check-circle"}),(0,s.Uk)("圖片網址格式正確 ")],-1),z={class:"row"},O={class:"col mb-3"},j=(0,s._)("label",{for:"inputProductName",class:"form-label"},"或 上傳圖片",-1),N={class:"row"},B={key:0,class:"col mb-3"},F=["src"],S={class:"col-8"},Z=(0,s._)("div",{class:"row"},[(0,s._)("legend",{class:"h3"},"產品資訊")],-1),q={class:"row"},H={class:"input-group mb-3"},Y=(0,s._)("label",{for:"inputProductName",class:"input-group-text"},"名稱",-1),R=(0,s._)("div",{class:"valid-feedback text-end"},[(0,s._)("i",{class:"bi bi-check-circle"}),(0,s.Uk)("產品名稱格式正確 ")],-1),K={class:"row"},Q={class:"col-7"},J={class:"input-group mb-3"},G=(0,s._)("label",{for:"inputProductCategory",class:"input-group-text"},"分類",-1),X=(0,s._)("option",{selected:"",disabled:""},"請選擇產品類別",-1),tt=(0,s._)("option",{value:"bgleisure"},"勃根地",-1),et=(0,s._)("option",{value:"SwanPanasia"},"新天鵝堡",-1),it=(0,s._)("option",{value:"gokids"},"玩樂小子",-1),st=(0,s._)("option",{value:"Kanga"},"袋鼠",-1),at=(0,s._)("option",{value:"sunnyboard"},"陽光",-1),lt=(0,s._)("option",{value:"hsinyi"},"上誼",-1),ot=(0,s._)("option",{value:"Hasbro"},"孩之寶",-1),nt=(0,s._)("option",{value:"gege"},"哿哿屋",-1),dt=(0,s._)("option",{value:"bghut"},"卡牌屋",-1),rt=(0,s._)("option",{value:"emperors4"},"愛樂事",-1),ct=(0,s._)("option",{value:"SharpPoint"},"尖端出版社",-1),ut=(0,s._)("option",{value:"Taiwan"},"台灣設計專區",-1),pt=(0,s._)("option",{value:"moaideas"},"摩埃創意工作室",-1),mt=(0,s._)("option",{value:"bigfungame"},"Big Fun",-1),ht=(0,s._)("option",{value:"2plus"},"TWO PLUS",-1),_t=(0,s._)("option",{value:"morefun"},"玩坊",-1),gt=(0,s._)("option",{value:"Chinese"},"中國、港澳代理",-1),bt=(0,s._)("option",{value:"English"},"英文/其他國家版本遊戲",-1),ft=[X,tt,et,it,st,at,lt,ot,nt,dt,rt,ct,ut,pt,mt,ht,_t,gt,bt],vt=(0,s._)("div",{id:"inputProductCategoryFeedback",class:"invalid-feedback text-end"}," 請選擇產品類別 ",-1),Pt=(0,s._)("div",{class:"valid-feedback text-end"},[(0,s._)("i",{class:"bi bi-check-circle"}),(0,s.Uk)("產品類別已選擇 ")],-1),kt={class:"col-5"},wt={class:"input-group mb-3"},yt=(0,s._)("label",{for:"inputProductUnit",class:"input-group-text"},"人數",-1),xt=(0,s._)("div",{class:"invalid-feedback text-end"}," 請填寫產品遊玩人數 ",-1),Ut=(0,s._)("div",{class:"valid-feedback text-end"},[(0,s._)("i",{class:"bi bi-check-circle"}),(0,s.Uk)("產品遊玩人數格式正確 ")],-1),Mt={class:"row"},Ct={class:"col-6"},Dt={class:"input-group mb-3"},$t=(0,s._)("label",{for:"inputProductOriginPrice",class:"input-group-text"},"原價",-1),Lt=(0,s._)("div",{class:"valid-feedback text-end"},[(0,s._)("i",{class:"bi bi-check-circle"}),(0,s.Uk)("產品原價格式正確 ")],-1),Tt={class:"col-6"},Vt={class:"input-group mb-3"},Et=(0,s._)("label",{for:"inputProductPrice",class:"input-group-text"},"售價",-1),It=(0,s._)("div",{class:"valid-feedback text-end"},[(0,s._)("i",{class:"bi bi-check-circle"}),(0,s.Uk)("產品售價格式正確 ")],-1),At=(0,s._)("hr",null,null,-1),Wt={class:"row"},zt={class:"col mb-3"},Ot=(0,s._)("label",{for:"inputProductDescription",class:"form-label"},"產品描述",-1),jt={class:"row"},Nt={class:"col mb-3"},Bt=(0,s._)("label",{for:"inputProductContent",class:"form-label"},"產品說明",-1),Ft={class:"row"},St={class:"col mb-3"},Zt=(0,s._)("label",{for:"inputProductIsEnabled",class:"form-check-label"},"是否啟用",-1),qt=(0,s._)("hr",null,null,-1),Ht={key:0,class:"col"},Yt=(0,s._)("legend",{class:"h3"},"產品圖片",-1),Rt={for:"`inputProductImagesUrl${key}`",class:"input-group-text"},Kt=["id","onUpdate:modelValue"],Qt=["onClick"],Jt={key:0},Gt={class:"modal-footer"},Xt=(0,s._)("button",{type:"button",class:"btn btn-outline-muted","data-bs-dismiss":"modal"},"取消",-1);function te(t,e,i,o,n,d){const r=(0,s.up)("VField"),c=(0,s.up)("ErrorMessage"),u=(0,s.up)("V-form");return(0,s.wg)(),(0,s.iD)("div",M,[(0,s._)("div",C,[(0,s._)("div",D,[$,(0,s._)("div",L,[(0,s._)("div",T,[(0,s.Wm)(u,{class:"row g-4"},{default:(0,s.w5)((({errors:t})=>[(0,s._)("div",V,[(0,s._)("div",E,[(0,s._)("div",I,[A,(0,s.Wm)(r,{type:"url",name:"imageUrl",id:"inputImageUrl",class:(0,l.C_)(["form-control",{"is-invalid":t["imageUrl"]||!n.tempProduct.imageUrl,"is-valid":!t["imageUrl"]&&n.tempProduct.imageUrl}]),placeholder:"請輸入圖片網址",rules:"url|required","aria-label":"產品圖片網址輸入框",modelValue:n.tempProduct.imageUrl,"onUpdate:modelValue":e[0]||(e[0]=t=>n.tempProduct.imageUrl=t)},null,8,["class","modelValue"]),(0,s.Wm)(c,{name:"imageUrl",class:"invalid-feedback text-end"}),W])]),(0,s._)("div",z,[(0,s._)("div",O,[j,(0,s._)("input",{type:"file",name:"url",id:"inputImageFile",class:"form-control",ref:"fileInput","aria-label":"產品圖片檔案上傳輸入框",onChange:e[1]||(e[1]=(...t)=>d.uploadFile&&d.uploadFile(...t))},null,544)])]),(0,s._)("div",N,[!t["imageUrl"]&&n.tempProduct.imageUrl?((0,s.wg)(),(0,s.iD)("div",B,[(0,s._)("img",{src:n.tempProduct.imageUrl,alt:"圖片封面圖",class:"img-fluid"},null,8,F)])):(0,s.kq)("",!0)])]),(0,s._)("div",S,[Z,(0,s._)("div",q,[(0,s._)("div",H,[Y,(0,s.Wm)(r,{type:"text",name:"productName",id:"inputProductName",class:(0,l.C_)(["form-control",{"is-invalid":t["productName"]||!n.tempProduct.title,"is-valid":n.tempProduct.title}]),placeholder:"請輸入產品名稱",rules:"required","aria-label":"產品名稱輸入框",modelValue:n.tempProduct.title,"onUpdate:modelValue":e[2]||(e[2]=t=>n.tempProduct.title=t)},null,8,["class","modelValue"]),(0,s.Wm)(c,{name:"productName",class:"invalid-feedback text-end"}),R])]),(0,s._)("div",K,[(0,s._)("div",Q,[(0,s._)("div",J,[G,(0,s.wy)((0,s._)("select",{id:"inputProductCategory",class:(0,l.C_)(["form-select",{"is-invalid":!n.tempProduct.category,"is-valid":n.tempProduct.category}]),"aria-label":"產品分類選擇","onUpdate:modelValue":e[3]||(e[3]=t=>n.tempProduct.category=t)},ft,2),[[a.bM,n.tempProduct.category]]),vt,Pt])]),(0,s._)("div",kt,[(0,s._)("div",wt,[yt,(0,s.wy)((0,s._)("input",{type:"text",min:"1",name:"productUnit",id:"inputProductUnit",class:(0,l.C_)(["form-control",{"is-invalid":!n.tempProduct.unit,"is-valid":n.tempProduct.unit}]),"aria-label":"產品單位","onUpdate:modelValue":e[4]||(e[4]=t=>n.tempProduct.unit=t)},null,2),[[a.nr,n.tempProduct.unit]]),xt,Ut])])]),(0,s._)("div",Mt,[(0,s._)("div",Ct,[(0,s._)("div",Dt,[$t,(0,s.Wm)(r,{type:"number",min:"0",name:"productOriginPrice",id:"inputProductOriginPrice",class:(0,l.C_)(["form-control",{"is-invalid":t["productOriginPrice"]||!n.tempProduct.origin_price,"is-valid":n.tempProduct.origin_price}]),placeholder:"請輸入產品原價","aria-label":"產品原價輸入框",modelValue:n.tempProduct.origin_price,"onUpdate:modelValue":e[5]||(e[5]=t=>n.tempProduct.origin_price=t)},null,8,["class","modelValue"]),(0,s.Wm)(c,{name:"productOriginPrice",class:"invalid-feedback"}),Lt])]),(0,s._)("div",Tt,[(0,s._)("div",Vt,[Et,(0,s.Wm)(r,{type:"number",min:"0",name:"productPrice",id:"inputProductPrice",class:(0,l.C_)(["form-control",{"is-invalid":t["productPrice"]||!n.tempProduct.price,"is-valid":n.tempProduct.price}]),placeholder:"請輸入產品售價",rules:"numeric|required","aria-label":"產品售價輸入框",modelValue:n.tempProduct.price,"onUpdate:modelValue":e[6]||(e[6]=t=>n.tempProduct.price=t)},null,8,["class","modelValue"]),(0,s.Wm)(c,{name:"productPrice",class:"invalid-feedback"}),It])])]),At,(0,s._)("div",Wt,[(0,s._)("div",zt,[Ot,(0,s.wy)((0,s._)("textarea",{type:"text",name:"productDescription",id:"inputProductDescription",class:"form-control",rows:"3",placeholder:"請輸入產品描述","aria-label":"產品描述輸入框","onUpdate:modelValue":e[7]||(e[7]=t=>n.tempProduct.description=t)},null,512),[[a.nr,n.tempProduct.description]])])]),(0,s._)("div",jt,[(0,s._)("div",Nt,[Bt,(0,s.wy)((0,s._)("textarea",{type:"text",name:"productContent",id:"inputProductContent",class:"form-control",rows:"3",placeholder:"請輸入產品說明","aria-label":"產品說明輸入框","onUpdate:modelValue":e[8]||(e[8]=t=>n.tempProduct.content=t)},null,512),[[a.nr,n.tempProduct.content]])])]),(0,s._)("div",Ft,[(0,s._)("div",St,[(0,s.wy)((0,s._)("input",{type:"checkbox",name:"productIsEnabled",id:"inputProductIsEnabled",class:"form-check-input","true-value":1,"false-value":0,"onUpdate:modelValue":e[9]||(e[9]=t=>n.tempProduct.is_enabled=t)},null,512),[[a.e8,n.tempProduct.is_enabled]]),Zt])])]),qt,n.tempProduct.imagesUrl?((0,s.wg)(),(0,s.iD)("div",Ht,[Yt,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.tempProduct.imagesUrl,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{class:"input-group mb-3",key:e},[(0,s._)("label",Rt,"圖片"+(0,l.zw)(e+1),1),(0,s.wy)((0,s._)("input",{type:"url",name:"productImagesUrl",id:`inputProductImagesUrl${e}`,class:"form-control",placeholder:"請輸入圖片連結","aria-label":"產品圖片網址列","onUpdate:modelValue":t=>n.tempProduct.imagesUrl[e]=t},null,8,Kt),[[a.nr,n.tempProduct.imagesUrl[e]]]),(0,s._)("button",{type:"button",class:"btn btn-outline-danger",onClick:t=>n.tempProduct.imagesUrl.splice(e,1)}," 移除 ",8,Qt)])))),128)),n.tempProduct.imagesUrl[n.tempProduct.imagesUrl.length-1]||!n.tempProduct.imagesUrl.length?((0,s.wg)(),(0,s.iD)("div",Jt,[(0,s._)("button",{class:"btn btn-outline-dark btn-sm d-block w-100",onClick:e[10]||(e[10]=t=>n.tempProduct.imagesUrl.push(""))}," 新增圖片 ")])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])),_:1})])]),(0,s._)("div",Gt,[Xt,(0,s._)("button",{type:"button",class:"btn btn-dark",onClick:e[11]||(e[11]=(0,a.iM)((e=>t.$emit("update-product",n.tempProduct)),["prevent"]))},"確定")])])])],512)}var ee=i(1339),ie={props:{product:{type:Object,default(){return{}}}},data(){return{modal:{},tempProduct:{}}},methods:{uploadFile(){const t=this.$refs.fileInput.files[0],e=new FormData;e.append("file-to-upload",t);const i="https://vue3-course-api.hexschool.io/api/yui-api/admin/upload";this.$http.post(i,e).then((t=>{console.log(t),t.data.success&&(this.tempProduct.imageUrl=t.data.imageUrl)}))}},watch:{product(){this.tempProduct=this.product,this.tempProduct.imagesUrl||(this.tempProduct.imagesUrl=[])}},mixins:[ee.Z]},se=i(89);const ae=(0,se.Z)(ie,[["render",te]]);var le=ae,oe=i(4570),ne=i(9948),de={data(){return{products:[],pagination:{},tempProduct:{},search:"",isLoading:!1,isNew:!1}},components:{ProductModal:le,DelModal:oe.Z,Pagination:ne.Z},inject:["toastMessagesMixin"],methods:{getProducts(t=1){this.isLoading=!0;const e=`https://vue3-course-api.hexschool.io/api/yui-api/admin/products?page=${t}`;this.$http.get(e).then((t=>{this.isLoading=!1,t.data.success&&(this.products=t.data.products,this.pagination=t.data.pagination)}))},openProductsModal(t,e){this.tempProduct=t?{}:{...e},this.isNew=t;const i=this.$refs.productModal;i.showModal()},openDelProductsModal(t){this.tempProduct={...t};const e=this.$refs.delModal;e.showModal()},delProduct(){const t=`https://vue3-course-api.hexschool.io/api/yui-api/admin/product/${this.tempProduct.id}`;this.isLoading=!0,this.$http.delete(t).then((t=>{this.toastMessagesMixin(t,"刪除");const e=this.$refs.delModal;e.hideModal(),this.getProducts(this.pagination.current_page)}))},updateProduct(t){this.tempProduct=t,this.tempProduct.price=parseInt(this.tempProduct.price,10),this.tempProduct.origin_price=parseInt(this.tempProduct.origin_price,10);let e="https://vue3-course-api.hexschool.io/api/yui-api/admin/product",i="post";this.isNew||(e=`https://vue3-course-api.hexschool.io/api/yui-api/admin/product/${t.id}`,i="put");const s=this.$refs.productModal;this.isLoading=!0,this.$http[i](e,{data:this.tempProduct}).then((e=>{this.toastMessagesMixin(e,"上傳",t.title),s.hideModal(),this.getProducts(this.pagination.current_page)}))}},computed:{filterProducts(){return this.products.filter((t=>{const e=t.title.match(this.search);return e}))}},created(){this.getProducts()}};const re=(0,se.Z)(de,[["render",U]]);var ce=re}}]);
//# sourceMappingURL=582.a267993d.js.map