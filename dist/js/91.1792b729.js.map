{"version":3,"file":"js/91.1792b729.js","mappings":"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","sources":["webpack://cat-house/./src/methods/favorite.js","webpack://cat-house/./src/views/UserfavonriteViews.vue","webpack://cat-house/./src/views/UserfavonriteViews.vue?e433"],"sourcesContent":["export default {\n  storeFavorite(favorite) {\n    const favoriteStr = JSON.stringify(favorite);\n    localStorage.setItem('favoriteProduct', favoriteStr);\n  },\n  getFavorite() {\n    return JSON.parse(localStorage.getItem('favoriteProduct'));\n  },\n};\n","<template>\n  <table class=\"table table-hover align-middle\">\n    <thead>\n      <tr>\n        <th class=\"text-center\">圖片</th>\n        <th class=\"text-center\">分類</th>\n        <th>產品名稱</th>\n        <th class=\"text-right\">原價</th>\n        <th class=\"text-right\">售價</th>\n        <th class=\"text-center\">編輯</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr v-for=\"product in products\" :key=\"product.id\">\n        <td class=\"text-center\">\n          <img :src=\"product.imageUrl\" :alt=\"product.title\"\n          class=\"img-fluid cartImg-size\">\n        </td>\n        <td class=\"text-center\">{{ product.category }}</td>\n        <td>{{ product.title }}</td>\n        <td class=\"text-right\">{{ $filters.currency(product.origin_price) }}</td>\n        <td class=\"text-right\">{{ $filters.currency(product.price) }}</td>\n        <td class=\"text-center\">\n          <div class=\"btn-group\">\n            <button type=\"button\" class=\"btn btn-danger\"\n            @click.prevent=\"removeFavorite(product)\">\n              <i class=\"bi bi-heart\"></i>\n            </button>\n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</template>\n\n<script>\nimport handleFavorite from '@/methods/favorite';\n\nexport default {\n  data() {\n    return {\n      myFavorite: handleFavorite.getFavorite() || [],\n      products: '',\n      isLoading: false,\n    };\n  },\n  inject: ['emitter', 'toastMessagesMixin'],\n  methods: {\n    getFavorite() {\n      this.myFavorite = handleFavorite.getFavorite();\n      this.getProducts();\n    },\n    getProducts() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      this.$http.get(url)\n        .then((response) => {\n          if (!response.data.success) {\n            this.toastMessagesMixin(response, '取得全部產品資料');\n            return;\n          }\n          this.products = response.data.products\n            .filter((product) => this.myFavorite.includes(product.id));\n        })\n        .catch((error) => {\n          this.toastMessagesMixin(error, '連線錯誤');\n        });\n    },\n    removeFavorite(item) {\n      this.isLoading = true;\n      this.myFavorite.splice(this.myFavorite.indexOf(item.id), 1);\n      this.toastMessagesMixin({\n        data: {\n          success: true,\n          message: `已將 ${item.title} 移除收藏`,\n        },\n      }, '移除收藏');\n      handleFavorite.storeFavorite(this.myFavorite);\n      this.emitter.emit('update-favorite');\n      this.getFavorite();\n      this.isLoading = false;\n    },\n  },\n  mounted() {\n    this.getProducts();\n  },\n};\n</script>\n","import { render } from \"./UserfavonriteViews.vue?vue&type=template&id=265ec340\"\nimport script from \"./UserfavonriteViews.vue?vue&type=script&lang=js\"\nexport * from \"./UserfavonriteViews.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"G:\\\\六角\\\\Vue\\\\Vue-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["storeFavorite","favorite","favoriteStr","JSON","stringify","localStorage","setItem","getFavorite","parse","getItem","class","_createElementVNode","_hoisted_11","_createElementBlock","_hoisted_2","_Fragment","_renderList","$data","product","key","id","src","imageUrl","alt","title","_toDisplayString","category","_ctx","currency","origin_price","price","type","onClick","$options","data","myFavorite","handleFavorite","products","isLoading","inject","methods","this","getProducts","url","$http","get","then","response","success","filter","includes","toastMessagesMixin","catch","error","removeFavorite","item","splice","indexOf","message","emitter","emit","mounted","__exports__","render"],"sourceRoot":""}