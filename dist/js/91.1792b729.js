"use strict";(self["webpackChunkcat_house"]=self["webpackChunkcat_house"]||[]).push([[91],{4226:function(t,e){e["Z"]={storeFavorite(t){const e=JSON.stringify(t);localStorage.setItem("favoriteProduct",e)},getFavorite(){return JSON.parse(localStorage.getItem("favoriteProduct"))}}},9091:function(t,e,s){s.r(e),s.d(e,{default:function(){return w}});var i=s(3396),r=s(7139),a=s(9242);const c={class:"table table-hover align-middle"},o=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"text-center"},"圖片"),(0,i._)("th",{class:"text-center"},"分類"),(0,i._)("th",null,"產品名稱"),(0,i._)("th",{class:"text-right"},"原價"),(0,i._)("th",{class:"text-right"},"售價"),(0,i._)("th",{class:"text-center"},"編輯")])],-1),l={class:"text-center"},n=["src","alt"],u={class:"text-center"},d={class:"text-right"},h={class:"text-right"},g={class:"text-center"},v={class:"btn-group"},_=["onClick"],m=(0,i._)("i",{class:"bi bi-heart"},null,-1),p=[m];function f(t,e,s,m,f,x){return(0,i.wg)(),(0,i.iD)("table",c,[o,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(f.products,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id},[(0,i._)("td",l,[(0,i._)("img",{src:e.imageUrl,alt:e.title,class:"img-fluid cartImg-size"},null,8,n)]),(0,i._)("td",u,(0,r.zw)(e.category),1),(0,i._)("td",null,(0,r.zw)(e.title),1),(0,i._)("td",d,(0,r.zw)(t.$filters.currency(e.origin_price)),1),(0,i._)("td",h,(0,r.zw)(t.$filters.currency(e.price)),1),(0,i._)("td",g,[(0,i._)("div",v,[(0,i._)("button",{type:"button",class:"btn btn-danger",onClick:(0,a.iM)((t=>x.removeFavorite(e)),["prevent"])},p,8,_)])])])))),128))])])}s(6699);var x=s(4226),F={data(){return{myFavorite:x.Z.getFavorite()||[],products:"",isLoading:!1}},inject:["emitter","toastMessagesMixin"],methods:{getFavorite(){this.myFavorite=x.Z.getFavorite(),this.getProducts()},getProducts(){const t="https://vue3-course-api.hexschool.io/api/yui-api/products/all";this.$http.get(t).then((t=>{t.data.success?this.products=t.data.products.filter((t=>this.myFavorite.includes(t.id))):this.toastMessagesMixin(t,"取得全部產品資料")})).catch((t=>{this.toastMessagesMixin(t,"連線錯誤")}))},removeFavorite(t){this.isLoading=!0,this.myFavorite.splice(this.myFavorite.indexOf(t.id),1),this.toastMessagesMixin({data:{success:!0,message:`已將 ${t.title} 移除收藏`}},"移除收藏"),x.Z.storeFavorite(this.myFavorite),this.emitter.emit("update-favorite"),this.getFavorite(),this.isLoading=!1}},mounted(){this.getProducts()}},y=s(89);const b=(0,y.Z)(F,[["render",f]]);var w=b}}]);
//# sourceMappingURL=91.1792b729.js.map