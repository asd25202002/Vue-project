"use strict";(self["webpackChunkcat_house"]=self["webpackChunkcat_house"]||[]).push([[976],{4226:function(t,e){e["Z"]={storeFavorite(t){const e=JSON.stringify(t);localStorage.setItem("favoriteProduct",e)},getFavorite(){return JSON.parse(localStorage.getItem("favoriteProduct"))}}},3338:function(t,e,s){s.r(e),s.d(e,{default:function(){return M}});var i=s(3396),a=s(7139),r=s(9242);const c={class:"container"},o={key:0,class:"table table-hover align-middle"},l=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"text-center"},"圖片"),(0,i._)("th",{class:"text-center"},"分類"),(0,i._)("th",null,"產品名稱"),(0,i._)("th",{class:"text-right"},"原價"),(0,i._)("th",{class:"text-right"},"售價"),(0,i._)("th",{class:"text-center"},"編輯")])],-1),n={class:"text-center"},u=["src","alt"],d={class:"text-center"},h={class:"text-right"},g={class:"text-right"},v={class:"text-center"},m={class:"btn-group"},_=["onClick"],p=(0,i._)("i",{class:"bi bi-heart"},null,-1),y=[p],f={key:1,class:"py-4 fs-5 text-muted"};function x(t,e,s,p,x,F){return(0,i.wg)(),(0,i.iD)("main",null,[(0,i._)("div",c,[x.myFavorite.length?((0,i.wg)(),(0,i.iD)("table",o,[l,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(x.products,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id},[(0,i._)("td",n,[(0,i._)("img",{src:e.imageUrl,alt:e.title,class:"img-fluid cartImg-size"},null,8,u)]),(0,i._)("td",d,(0,a.zw)(e.category),1),(0,i._)("td",null,(0,a.zw)(e.title),1),(0,i._)("td",h,(0,a.zw)(t.$filters.currency(e.origin_price)),1),(0,i._)("td",g,(0,a.zw)(t.$filters.currency(e.price)),1),(0,i._)("td",v,[(0,i._)("div",m,[(0,i._)("button",{type:"button",class:"btn btn-danger",onClick:(0,r.iM)((t=>F.removeFavorite(e)),["prevent"])},y,8,_)])])])))),128))])])):((0,i.wg)(),(0,i.iD)("div",f,"您還沒有願望清單"))])])}s(6699);var F=s(4226),b={data(){return{myFavorite:F.Z.getFavorite()||[],products:"",isLoading:!1}},inject:["emitter","toastMessagesMixin"],methods:{getFavorite(){this.myFavorite=F.Z.getFavorite(),this.getProducts()},getProducts(){const t="https://vue3-course-api.hexschool.io/api/yui-api/products/all";this.$http.get(t).then((t=>{t.data.success?this.products=t.data.products.filter((t=>this.myFavorite.includes(t.id))):this.toastMessagesMixin(t,"取得全部產品資料")})).catch((t=>{this.toastMessagesMixin(t,"連線錯誤")}))},removeFavorite(t){this.isLoading=!0,this.myFavorite.splice(this.myFavorite.indexOf(t.id),1),this.toastMessagesMixin({data:{success:!0,message:`已將 ${t.title} 移除收藏`}},"移除收藏"),F.Z.storeFavorite(this.myFavorite),this.emitter.emit("update-favorite"),this.getFavorite(),this.isLoading=!1}},mounted(){this.getProducts()}},w=s(89);const k=(0,w.Z)(b,[["render",x]]);var M=k}}]);
//# sourceMappingURL=976.611772e9.js.map