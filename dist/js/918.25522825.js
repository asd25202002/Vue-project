"use strict";(self["webpackChunkcat_house"]=self["webpackChunkcat_house"]||[]).push([[918],{5918:function(t,s,i){i.r(s),i.d(s,{default:function(){return S}});var l=i(3396),a=i(7139),e=i(9242);const c={class:"my-4"},o=(0,l._)("hr",null,null,-1),n={class:"container"},r=(0,l.uE)('<nav style="--bs-breadcrumb-divider:&#39;&gt;&#39;;" aria-label="索引列"><ol class="breadcrumb"><li class="breadcrumb-item"> 首頁 </li><li class="breadcrumb-item active" aria-current="page">購物車確認</li></ol></nav><div class="d-none d-lg-block mb-5"><ul class="row row-col-4 align-items-center text-center list-unstyled"><li class="col position-relative progressMenu__itme--active"><p class="m-0 py-2 text-white">購物車確認</p></li><li class="col position-relative"><p class="m-0 py-2">填寫資料</p></li><li class="col position-relative"><p class="m-0 py-2">資料確認</p></li><li class="col position-relative"><p class="m-0 py-2 fs-6">購物完成</p></li></ul></div>',2),u={key:0,class:"row"},d={class:"col-lg-8"},p={class:"mb-3 fs-5"},g={class:"col-3 align-items-center"},_=["src","alt"],h={class:"col-9 mb-3"},m={class:"row"},v={class:"col-5"},b={class:"col-7"},y={class:"mb-3 text-end"},w=["onClick"],f={class:"mb-3"},x={class:"input-group"},k=["onUpdate:modelValue","onChange"],C=(0,l._)("label",{for:"Unit",class:"input-group-text"},"盒",-1),U={class:"text-end"},M={class:"fs-5"},L=(0,l.Uk)("小計 "),z=(0,l._)("i",{class:"bi bi-currency-dollar"},null,-1),D={class:"col-lg-4"},q=(0,l._)("div",{class:"mb-3 py-2 bg-categoryTitle text-center text-white fs-5"},[(0,l._)("strong",null,"合計金額")],-1),$={class:"row mb-5"},V=(0,l._)("div",{class:"col-6 fs-4"},[(0,l._)("strong",null,"商品合計")],-1),H={class:"col-6 text-end fs-4"},T={key:0},W=(0,l._)("i",{class:"bi bi-currency-dollar"},null,-1),Y={key:1},j={class:"text-muted"},E=(0,l._)("i",{class:"bi bi-currency-dollar"},null,-1),I=(0,l._)("i",{class:"bi bi-currency-dollar"},null,-1),K=(0,l._)("div",{class:"mb-3 py-2 bg-categoryTitle text-center text-white fs-5"},[(0,l._)("strong",null,"優惠卷")],-1),Z={class:"row mb-5"},A={class:"input-group mb-3"},B=(0,l._)("label",{for:"inputCoupon",class:"input-group-text"},[(0,l._)("strong",null,"優惠碼")],-1),F=(0,l._)("div",{class:"fs-5 text-end text-muted"},[(0,l.Uk)("現在輸入"),(0,l._)("strong",null,"summer9487"),(0,l.Uk)("即可享有25%的優惠")],-1),G={class:"text-center"},J=(0,l.Uk)("前往結帳"),N={key:1,class:"fs-5 text-muted"};function O(t,s,i,O,P,Q){const R=(0,l.up)("VLoading"),S=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(R,{active:P.isLoading},null,8,["active"]),(0,l._)("main",c,[o,(0,l._)("div",n,[r,P.carts?((0,l.wg)(),(0,l.iD)("div",N,"您還沒有購買商品")):((0,l.wg)(),(0,l.iD)("div",u,[(0,l._)("div",d,[(0,l._)("div",p,[(0,l._)("strong",null,"已購買 "+(0,a.zw)(P.carts.carts.length)+" 件",1)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(P.carts.carts,(t=>((0,l.wg)(),(0,l.iD)("div",{class:"row row-cols-2",key:t.id},[(0,l._)("div",g,[(0,l._)("img",{src:t.product.imageUrl,alt:t.product.title,class:"img-fluid cartImg-size"},null,8,_)]),(0,l._)("div",h,[(0,l._)("div",m,[(0,l._)("div",v,(0,a.zw)(t.product.title),1),(0,l._)("div",b,[(0,l._)("div",y,[(0,l._)("button",{type:"button",class:"btn btn-outline-danger",onClick:s=>Q.delCart(t.id)},"刪除",8,w)]),(0,l._)("div",f,[(0,l._)("div",x,[(0,l.wy)((0,l._)("input",{type:"number",min:"1",id:"Unit",class:"form-control text-center","onUpdate:modelValue":s=>t.qty=s,onChange:s=>Q.updateCart(t)},null,40,k),[[e.nr,t.qty]]),C])]),(0,l._)("div",U,[(0,l._)("p",M,[(0,l._)("strong",null,[L,z,(0,l.Uk)(" "+(0,a.zw)(P.carts.final_total),1)])])])])])])])))),128))]),(0,l._)("div",D,[q,(0,l._)("div",$,[V,(0,l._)("div",H,[P.carts.total===P.carts.final_total?((0,l.wg)(),(0,l.iD)("strong",T,[W,(0,l.Uk)((0,a.zw)(P.carts.total),1)])):(0,l.kq)("",!0),P.carts.total>P.carts.final_total?((0,l.wg)(),(0,l.iD)("div",Y,[(0,l._)("p",null,[(0,l._)("del",j,[E,(0,l.Uk)((0,a.zw)(P.carts.total),1)])]),(0,l._)("p",null,[(0,l._)("strong",null,[I,(0,l.Uk)((0,a.zw)(P.carts.final_total),1)])])])):(0,l.kq)("",!0)])]),K,(0,l._)("div",Z,[(0,l._)("div",A,[B,(0,l.wy)((0,l._)("input",{type:"text",id:"inputCoupon",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=t=>P.code=t)},null,512),[[e.nr,P.code]]),(0,l._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:s[1]||(s[1]=(0,e.iM)(((...t)=>Q.coupon&&Q.coupon(...t)),["prevent"]))},"兌換")]),F]),(0,l._)("div",G,[(0,l.Wm)(S,{class:"btn btn-secondary",to:{name:"cartform"}},{default:(0,l.w5)((()=>[J])),_:1})])])]))])])],64)}var P={data(){return{carts:{},code:"",isLoading:!1}},inject:["emitter","toastMessagesMixin"],methods:{getCarts(){const t="https://vue3-course-api.hexschool.io/api/yui-api/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.isLoading=!1,t.data.success&&(this.carts=t.data.data)}))},delCart(t){const s=`https://vue3-course-api.hexschool.io/api/yui-api/cart/${t}`;this.isLoading=!0,this.$http.delete(s).then((t=>{t.data.success&&(this.toastMessagesMixin(t,"刪除購物車項目"),this.emitter.emit("update-cart"),this.getCarts())}))},updateCart(t){const s={product_id:t.id,qty:t.qty},i=`https://vue3-course-api.hexschool.io/api/yui-api/cart/${t.id}`;this.isLoading=!0,this.$http.put(i,{data:s}).then((t=>{t.data.success&&(this.toastMessagesMixin(t,"更新購物車項目"),this.getCarts())}))},coupon(){const t={code:this.code},s="https://vue3-course-api.hexschool.io/api/yui-api/coupon";this.isLoading=!0,this.$http.post(s,{data:t}).then((t=>{this.isLoading=!1,this.toastMessagesMixin(t,"優惠卷使用"),this.getCarts()}))}},created(){this.getCarts()}},Q=i(89);const R=(0,Q.Z)(P,[["render",O]]);var S=R}}]);
//# sourceMappingURL=918.25522825.js.map