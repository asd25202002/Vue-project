"use strict";(self["webpackChunkcat_house"]=self["webpackChunkcat_house"]||[]).push([[433],{6433:function(t,s,i){i.r(s),i.d(s,{default:function(){return R}});var a=i(3396),l=i(7139),e=i(9242);const c={class:"my-4"},o=(0,a._)("hr",null,null,-1),n={class:"container"},r=(0,a.uE)('<nav style="--bs-breadcrumb-divider:&#39;&gt;&#39;;" aria-label="索引列"><ol class="breadcrumb"><li class="breadcrumb-item"> 首頁 </li><li class="breadcrumb-item active" aria-current="page">購物車確認</li></ol></nav><div class="d-none d-lg-block mb-5"><ul class="row row-col-4 align-items-center text-center list-unstyled"><li class="col position-relative progressMenu__itme--active"><p class="m-0 py-2 text-white">購物車確認</p></li><li class="col position-relative"><p class="m-0 py-2">填寫資料</p></li><li class="col position-relative"><p class="m-0 py-2">資料確認</p></li><li class="col position-relative"><p class="m-0 py-2 fs-6">購物完成</p></li></ul></div>',2),u={class:"row"},d={class:"col-lg-8"},p={key:0,class:"mb-3 fs-5"},g={class:"col-3 align-items-center"},_=["src","alt"],h={class:"col-9 mb-3"},m={class:"row"},b={class:"col-5"},v={class:"col-7"},y={class:"mb-3 text-end"},w=["onClick"],f={class:"mb-3"},x={class:"input-group"},k=["onUpdate:modelValue","onChange"],C=(0,a._)("label",{for:"Unit",class:"input-group-text"},"盒",-1),U={class:"text-end"},M={class:"fs-5"},L=(0,a.Uk)("小計 "),q=(0,a._)("i",{class:"bi bi-currency-dollar"},null,-1),z={class:"col-lg-4"},D=(0,a._)("div",{class:"mb-3 py-2 bg-categoryTitle text-center text-white fs-5"},[(0,a._)("strong",null,"合計金額")],-1),$={class:"row mb-5"},V=(0,a._)("div",{class:"col-6 fs-4"},[(0,a._)("strong",null,"商品合計")],-1),H={class:"col-6 text-end fs-4"},T={key:0},W=(0,a._)("i",{class:"bi bi-currency-dollar"},null,-1),Y={key:1},j={class:"text-muted"},E=(0,a._)("i",{class:"bi bi-currency-dollar"},null,-1),I=(0,a._)("i",{class:"bi bi-currency-dollar"},null,-1),K=(0,a._)("div",{class:"mb-3 py-2 bg-categoryTitle text-center text-white fs-5"},[(0,a._)("strong",null,"優惠卷")],-1),Z={class:"row mb-5"},A={class:"input-group mb-3"},B=(0,a._)("label",{for:"inputCoupon",class:"input-group-text"},[(0,a._)("strong",null,"優惠碼")],-1),F=(0,a._)("div",{class:"fs-5 text-end text-muted"},[(0,a.Uk)("現在輸入"),(0,a._)("strong",null,"summer9487"),(0,a.Uk)("即可享有25%的優惠")],-1),G={class:"text-center"},J=(0,a.Uk)("前往結帳");function N(t,s,i,N,O,P){const Q=(0,a.up)("VLoading"),R=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(Q,{active:O.isLoading},null,8,["active"]),(0,a._)("main",c,[o,(0,a._)("div",n,[r,(0,a._)("div",u,[(0,a._)("div",d,[O.carts.carts?((0,a.wg)(),(0,a.iD)("div",p,[(0,a._)("strong",null,"已購買 "+(0,l.zw)(O.carts.carts.length)+" 件",1)])):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(O.carts.carts,(t=>((0,a.wg)(),(0,a.iD)("div",{class:"row row-cols-2",key:t.id},[(0,a._)("div",g,[(0,a._)("img",{src:t.product.imageUrl,alt:t.product.title,class:"img-fluid cartImg-size"},null,8,_)]),(0,a._)("div",h,[(0,a._)("div",m,[(0,a._)("div",b,(0,l.zw)(t.product.title),1),(0,a._)("div",v,[(0,a._)("div",y,[(0,a._)("button",{type:"button",class:"btn btn-outline-danger",onClick:s=>P.delCart(t.id)},"刪除",8,w)]),(0,a._)("div",f,[(0,a._)("div",x,[(0,a.wy)((0,a._)("input",{type:"number",min:"1",id:"Unit",class:"form-control text-center","onUpdate:modelValue":s=>t.qty=s,onChange:s=>P.updateCart(t)},null,40,k),[[e.nr,t.qty]]),C])]),(0,a._)("div",U,[(0,a._)("p",M,[(0,a._)("strong",null,[L,q,(0,a.Uk)(" "+(0,l.zw)(O.carts.final_total),1)])])])])])])])))),128))]),(0,a._)("div",z,[D,(0,a._)("div",$,[V,(0,a._)("div",H,[O.carts.total===O.carts.final_total?((0,a.wg)(),(0,a.iD)("strong",T,[W,(0,a.Uk)((0,l.zw)(O.carts.total),1)])):(0,a.kq)("",!0),O.carts.total>O.carts.final_total?((0,a.wg)(),(0,a.iD)("div",Y,[(0,a._)("p",null,[(0,a._)("del",j,[E,(0,a.Uk)((0,l.zw)(O.carts.total),1)])]),(0,a._)("p",null,[(0,a._)("strong",null,[I,(0,a.Uk)((0,l.zw)(O.carts.final_total),1)])])])):(0,a.kq)("",!0)])]),K,(0,a._)("div",Z,[(0,a._)("div",A,[B,(0,a.wy)((0,a._)("input",{type:"text",id:"inputCoupon",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=t=>O.code=t)},null,512),[[e.nr,O.code]]),(0,a._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:s[1]||(s[1]=(0,e.iM)(((...t)=>P.coupon&&P.coupon(...t)),["prevent"]))},"兌換")]),F]),(0,a._)("div",G,[(0,a.Wm)(R,{class:"btn btn-secondary",to:{name:"cartform"}},{default:(0,a.w5)((()=>[J])),_:1})])])])])])],64)}var O={data(){return{carts:{},code:"",isLoading:!1}},inject:["emitter","toastMessagesMixin"],methods:{getCarts(){const t="https://vue3-course-api.hexschool.io/api/yui-api/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.isLoading=!1,t.data.success&&(this.carts=t.data.data)}))},delCart(t){const s=`https://vue3-course-api.hexschool.io/api/yui-api/cart/${t}`;this.isLoading=!0,this.$http.delete(s).then((t=>{t.data.success&&(this.toastMessagesMixin(t,"刪除購物車項目"),this.emitter.emit("update-cart"),this.getCarts())}))},updateCart(t){const s={product_id:t.id,qty:t.qty},i=`https://vue3-course-api.hexschool.io/api/yui-api/cart/${t.id}`;this.isLoading=!0,this.$http.put(i,{data:s}).then((t=>{t.data.success&&(this.toastMessagesMixin(t,"更新購物車項目"),this.getCarts())}))},coupon(){const t={code:this.code},s="https://vue3-course-api.hexschool.io/api/yui-api/coupon";this.isLoading=!0,this.$http.post(s,{data:t}).then((t=>{this.isLoading=!1,this.toastMessagesMixin(t,"優惠卷使用"),this.getCarts()}))}},created(){this.getCarts()}},P=i(89);const Q=(0,P.Z)(O,[["render",N]]);var R=Q}}]);
//# sourceMappingURL=433.c5445b0c.js.map